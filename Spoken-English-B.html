<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Everyday English Helper | ইংরেজি শেখার সহায়িকা</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4285f4;
            --secondary-color: #34a853;
            --accent-color: #ea4335;
            --light-color: #f8f9fa;
            --dark-color: #202124;
            --border-color: #dadce0;
            --recording-color: #f44336;
            --translation-bg: #fff3e0;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1.5rem 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .language-switcher {
            display: flex;
            gap: 1rem;
        }
        
        .lang-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .lang-btn.active {
            background: white;
            color: var(--primary-color);
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        
        .hero {
            text-align: center;
            padding: 2.5rem 0;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 10px;
            margin-bottom: 2.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .tab {
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            color: var(--dark-color);
            transition: all 0.3s;
        }
        
        .tab.active {
            border-bottom: 3px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        .tool-card {
            background-color: white;
            border-radius: 10px;
            padding: 1.8rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
        }
        
        .tool-card h2 {
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            font-size: 1.4rem;
        }
        
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.6rem;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        select, textarea, input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        select:focus, textarea:focus, input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background-color: var(--accent-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .btn-secondary {
            background-color: var(--primary-color);
        }
        
        .btn-secondary:hover {
            background-color: #3367d6;
        }
        
        .btn-tertiary {
            background-color: var(--secondary-color);
        }
        
        .btn-tertiary:hover {
            background-color: #2d924a;
        }
        
        .btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result-container {
            background-color: white;
            border-radius: 10px;
            padding: 1.8rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
        }
        
        .result-container h2 {
            margin-bottom: 1.2rem;
            color: var(--dark-color);
            font-size: 1.3rem;
        }
        
        #result-content {
            background-color: #f8f9fa;
            padding: 1.2rem;
            border-radius: 6px;
            border-left: 4px solid var(--primary-color);
            min-height: 100px;
        }
        
        .translation {
            background-color: var(--translation-bg);
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 6px;
            border-left: 4px solid #FFA000;
        }
        
        .translation h3 {
            color: #E65100;
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }
        
        .recording-ui {
            margin-top: 1.5rem;
            padding: 1.2rem;
            background: #f0f8ff;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            display: none;
        }
        
        .recording-ui h3 {
            margin-bottom: 0.8rem;
            color: var(--dark-color);
        }
        
        .recording-ui p {
            margin-bottom: 1rem;
            color: #555;
        }
        
        .recording-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        #recorded-audio {
            width: 100%;
            margin-top: 1rem;
            display: none;
        }
        
        .recording-status {
            font-style: italic;
            color: #666;
            margin-top: 0.5rem;
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 0 1.2rem;
            }
            
            .header-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .hero {
                padding: 2rem 1rem;
            }
            
            .tabs {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 5px;
            }
            
            .tool-card, .result-container {
                padding: 1.4rem;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 0.8rem;
            }
            
            .recording-controls {
                flex-direction: column;
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <h1>Everyday English Helper | ইংরেজি শেখার সহায়িকা</h1>
            <div class="language-switcher">
                <button class="lang-btn active" id="en-btn">English</button>
                <button class="lang-btn" id="bn-btn">বাংলা</button>
            </div>
        </div>
    </header>
    
    <div class="container">
        <section class="hero">
            <h1 class="lang-en">Master Daily English Communication</h1>
            <h1 class="lang-bn" style="display: none;">দৈনন্দিন ইংরেজি যোগাযোগ রপ্ত করুন</h1>
            <p class="lang-en">Practical tools for social, professional, and custom communication needs</p>
            <p class="lang-bn" style="display: none;">সামাজিক, পেশাগত এবং কাস্টম যোগাযোগের প্রয়োজনের জন্য ব্যবহারিক সরঞ্জাম</p>
        </section>
        
        <div class="tabs">
            <div class="tab active" data-tab="social">
                <span class="lang-en">Social Interactions</span>
                <span class="lang-bn" style="display: none;">সামাজিক যোগাযোগ</span>
            </div>
            <div class="tab" data-tab="professional">
                <span class="lang-en">Professional Communication</span>
                <span class="lang-bn" style="display: none;">পেশাগত যোগাযোগ</span>
            </div>
            <div class="tab" data-tab="custom">
                <span class="lang-en">Custom Practice</span>
                <span class="lang-bn" style="display: none;">কাস্টম অনুশীলন</span>
            </div>
        </div>
        
        <div class="tab-content active" id="social-tab">
            <div class="tool-card">
                <h2 class="lang-en">Social English Builder</h2>
                <h2 class="lang-bn" style="display: none;">সামাজিক ইংরেজি বিল্ডার</h2>
                <div class="input-group">
                    <label for="social-scenario" class="lang-en">Scenario</label>
                    <label for="social-scenario" class="lang-bn" style="display: none;">পরিস্থিতি</label>
                    <select id="social-scenario">
                        <option value="greeting" class="lang-en">Greeting someone</option>
                        <option value="greeting" class="lang-bn" style="display: none;">কাউকে অভিবাদন জানানো</option>
                        <option value="introduction" class="lang-en">Introducing yourself</option>
                        <option value="introduction" class="lang-bn" style="display: none;">নিজেকে পরিচয় করানো</option>
                        <option value="smalltalk" class="lang-en">Making small talk</option>
                        <option value="smalltalk" class="lang-bn" style="display: none;">ছোট্ট আলাপ করা</option>
                        <option value="compliment" class="lang-en">Giving a compliment</option>
                        <option value="compliment" class="lang-bn" style="display: none;">প্রশংসা করা</option>
                        <option value="apology" class="lang-en">Making an apology</option>
                        <option value="apology" class="lang-bn" style="display: none;">ক্ষমা চাওয়া</option>
                        <option value="invitation" class="lang-en">Inviting someone</option>
                        <option value="invitation" class="lang-bn" style="display: none;">কাউকে আমন্ত্রণ জানানো</option>
                        <option value="asking-for-help" class="lang-en">Asking for help</option>
                        <option value="asking-for-help" class="lang-bn" style="display: none;">সাহায্য চাওয়া</option>
                        <option value="giving-directions" class="lang-en">Giving directions</option>
                        <option value="giving-directions" class="lang-bn" style="display: none;">দিকনির্দেশনা দেওয়া</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="social-context" class="lang-en">Context</label>
                    <label for="social-context" class="lang-bn" style="display: none;">প্রসঙ্গ</label>
                    <select id="social-context">
                        <option value="formal" class="lang-en">Formal</option>
                        <option value="formal" class="lang-bn" style="display: none;">আনুষ্ঠানিক</option>
                        <option value="neutral" class="lang-en">Neutral</option>
                        <option value="neutral" class="lang-bn" style="display: none;">নিরপেক্ষ</option>
                        <option value="informal" class="lang-en">Informal</option>
                        <option value="informal" class="lang-bn" style="display: none;">অনানুষ্ঠানিক</option>
                    </select>
                </div>
                <button id="generate-social" class="btn">
                    <i class="fas fa-comment-dots"></i>
                    <span class="lang-en">Generate Phrases</span>
                    <span class="lang-bn" style="display: none;">বাক্যাংশ তৈরি করুন</span>
                </button>
            </div>
        </div>
        
        <div class="tab-content" id="professional-tab">
            <div class="tool-card">
                <h2 class="lang-en">Professional English Builder</h2>
                <h2 class="lang-bn" style="display: none;">পেশাগত ইংরেজি বিল্ডার</h2>
                <div class="input-group">
                    <label for="professional-scenario" class="lang-en">Scenario</label>
                    <label for="professional-scenario" class="lang-bn" style="display: none;">পরিস্থিতি</label>
                    <select id="professional-scenario">
                        <option value="email" class="lang-en">Writing an email</option>
                        <option value="email" class="lang-bn" style="display: none;">ইমেইল লেখা</option>
                        <option value="meeting" class="lang-en">Participating in a meeting</option>
                        <option value="meeting" class="lang-bn" style="display: none;">মিটিংয়ে অংশগ্রহণ</option>
                        <option value="request" class="lang-en">Making a request</option>
                        <option value="request" class="lang-bn" style="display: none;">অনুরোধ করা</option>
                        <option value="presentation" class="lang-en">Giving a presentation</option>
                        <option value="presentation" class="lang-bn" style="display: none;">প্রেজেন্টেশন দেওয়া</option>
                        <option value="interview" class="lang-en">Job interview</option>
                        <option value="interview" class="lang-bn" style="display: none;">চাকরির ইন্টারভিউ</option>
                        <option value="negotiation" class="lang-en">Negotiation</option>
                        <option value="negotiation" class="lang-bn" style="display: none;">আলোচনা</option>
                        <option value="feedback" class="lang-en">Giving feedback</option>
                        <option value="feedback" class="lang-bn" style="display: none;">ফিডব্যাক দেওয়া</option>
                        <option value="networking" class="lang-en">Networking</option>
                        <option value="networking" class="lang-bn" style="display: none;">নেটওয়ার্কিং</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="professional-tone" class="lang-en">Tone</label>
                    <label for="professional-tone" class="lang-bn" style="display: none;">সুর</label>
                    <select id="professional-tone">
                        <option value="formal" class="lang-en">Formal</option>
                        <option value="formal" class="lang-bn" style="display: none;">আনুষ্ঠানিক</option>
                        <option value="polite" class="lang-en">Polite</option>
                        <option value="polite" class="lang-bn" style="display: none;">ভদ্র</option>
                        <option value="friendly" class="lang-en">Friendly Professional</option>
                        <option value="friendly" class="lang-bn" style="display: none;">বন্ধুত্বপূর্ণ পেশাদার</option>
                    </select>
                </div>
                <button id="generate-professional" class="btn">
                    <i class="fas fa-briefcase"></i>
                    <span class="lang-en">Generate Phrases</span>
                    <span class="lang-bn" style="display: none;">বাক্যাংশ তৈরি করুন</span>
                </button>
            </div>
        </div>
        
        <div class="tab-content" id="custom-tab">
            <div class="tool-card">
                <h2 class="lang-en">Custom English Practice</h2>
                <h2 class="lang-bn" style="display: none;">কাস্টম ইংরেজি অনুশীলন</h2>
                <div class="input-group">
                    <label for="custom-scenario" class="lang-en">Describe your situation</label>
                    <label for="custom-scenario" class="lang-bn" style="display: none;">আপনার পরিস্থিতি বর্ণনা করুন</label>
                    <textarea id="custom-scenario" rows="3" placeholder="e.g., I need to ask my neighbor to be quieter at night" class="lang-en"></textarea>
                    <textarea id="custom-scenario-bn" rows="3" placeholder="উদাহরণস্বরূপ, আমার প্রতিবেশীকে রাতে কম শব্দ করতে বলতে হবে" class="lang-bn" style="display: none;"></textarea>
                </div>
                <div class="input-group">
                    <label for="custom-tone" class="lang-en">Desired tone</label>
                    <label for="custom-tone" class="lang-bn" style="display: none;">কাঙ্ক্ষিত সুর</label>
                    <select id="custom-tone">
                        <option value="polite" class="lang-en">Polite</option>
                        <option value="polite" class="lang-bn" style="display: none;">ভদ্র</option>
                        <option value="friendly" class="lang-en">Friendly</option>
                        <option value="friendly" class="lang-bn" style="display: none;">বন্ধুত্বপূর্ণ</option>
                        <option value="firm" class="lang-en">Firm</option>
                        <option value="firm" class="lang-bn" style="display: none;">দৃঢ়</option>
                        <option value="formal" class="lang-en">Formal</option>
                        <option value="formal" class="lang-bn" style="display: none;">আনুষ্ঠানিক</option>
                        <option value="diplomatic" class="lang-en">Diplomatic</option>
                        <option value="diplomatic" class="lang-bn" style="display: none;">কূটনৈতিক</option>
                    </select>
                </div>
                <button id="generate-custom" class="btn">
                    <i class="fas fa-magic"></i>
                    <span class="lang-en">Generate Response</span>
                    <span class="lang-bn" style="display: none;">প্রতিক্রিয়া তৈরি করুন</span>
                </button>
            </div>
        </div>
        
        <section class="result-container">
            <h2 class="lang-en">Suggested Phrases</h2>
            <h2 class="lang-bn" style="display: none;">প্রস্তাবিত বাক্যাংশ</h2>
            <div id="result-content">
                <p style="color: #666;" class="lang-en">Your generated English phrases will appear here.</p>
                <p style="color: #666; display: none;" class="lang-bn">আপনার তৈরি ইংরেজি বাক্যাংশ এখানে প্রদর্শিত হবে।</p>
            </div>
            <div id="translation-container" style="display: none;">
                <div class="translation">
                    <h3 class="lang-en">Bengali Translation:</h3>
                    <h3 class="lang-bn" style="display: none;">বাংলা অনুবাদ:</h3>
                    <p id="bengali-translation"></p>
                </div>
            </div>
            <div class="action-buttons">
                <button id="practice-speech" class="btn btn-secondary" style="display: none;">
                    <i class="fas fa-volume-up"></i>
                    <span class="lang-en">Practice Speaking</span>
                    <span class="lang-bn" style="display: none;">কথা বলা অনুশীলন করুন</span>
                </button>
                <button id="copy-text" class="btn btn-tertiary" style="display: none;">
                    <i class="fas fa-copy"></i>
                    <span class="lang-en">Copy Text</span>
                    <span class="lang-bn" style="display: none;">টেক্সট কপি করুন</span>
                </button>
                <button id="show-translation" class="btn" style="display: none; background-color: #FFA000;">
                    <i class="fas fa-language"></i>
                    <span class="lang-en">Show Translation</span>
                    <span class="lang-bn" style="display: none;">অনুবাদ দেখুন</span>
                </button>
            </div>
            <div class="recording-ui" id="recording-ui">
                <h3 class="lang-en">Practice Recording</h3>
                <h3 class="lang-bn" style="display: none;">অনুশীলন রেকর্ডিং</h3>
                <p class="lang-en">Record yourself reading the text above, then compare with the model pronunciation.</p>
                <p class="lang-bn" style="display: none;">উপরের টেক্সটটি পড়ে নিজেকে রেকর্ড করুন, তারপর মডেল উচ্চারণের সাথে তুলনা করুন।</p>
                <div class="recording-controls">
                    <button id="start-recording" class="btn" style="background-color: var(--secondary-color);">
                        <i class="fas fa-microphone"></i>
                        <span class="lang-en">Start Recording</span>
                        <span class="lang-bn" style="display: none;">রেকর্ডিং শুরু করুন</span>
                    </button>
                    <button id="stop-recording" class="btn" style="background-color: var(--accent-color); display: none;">
                        <i class="fas fa-stop"></i>
                        <span class="lang-en">Stop Recording</span>
                        <span class="lang-bn" style="display: none;">রেকর্ডিং বন্ধ করুন</span>
                    </button>
                </div>
                <div class="recording-status" id="recording-status"></div>
                <audio id="recorded-audio" controls></audio>
            </div>
        </section>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Language switching functionality
            const enBtn = document.getElementById('en-btn');
            const bnBtn = document.getElementById('bn-btn');
            
            enBtn.addEventListener('click', function() {
                enBtn.classList.add('active');
                bnBtn.classList.remove('active');
                document.querySelectorAll('.lang-en').forEach(el => el.style.display = '');
                document.querySelectorAll('.lang-bn').forEach(el => el.style.display = 'none');
                document.getElementById('custom-scenario').style.display = '';
                document.getElementById('custom-scenario-bn').style.display = 'none';
            });
            
            bnBtn.addEventListener('click', function() {
                bnBtn.classList.add('active');
                enBtn.classList.remove('active');
                document.querySelectorAll('.lang-bn').forEach(el => el.style.display = '');
                document.querySelectorAll('.lang-en').forEach(el => el.style.display = 'none');
                document.getElementById('custom-scenario').style.display = 'none';
                document.getElementById('custom-scenario-bn').style.display = '';
            });

            // Tab functionality
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`${tab.dataset.tab}-tab`).classList.add('active');
                });
            });

            // Complete phrase databases with Bengali translations
            const socialPhrases = {
                greeting: {
                    formal: [
                        {en: "Good morning/afternoon/evening, [Name].", bn: "শুভ সকাল/দুপুর/সন্ধ্যা, [নাম]।"},
                        {en: "Hello, it's a pleasure to see you.", bn: "হ্যালো, আপনাকে দেখে আনন্দিত হলাম।"},
                        {en: "How do you do?", bn: "আপনি কেমন আছেন?"}
                    ],
                    neutral: [
                        {en: "Hello [Name], how are you?", bn: "হ্যালো [নাম], আপনি কেমন আছেন?"},
                        {en: "Hi there!", bn: "হাই!"},
                        {en: "Good to see you.", bn: "আপনাকে দেখে ভালো লাগলো।"}
                    ],
                    informal: [
                        {en: "Hey! What's up?", bn: "হেই! কি অবস্থা?"},
                        {en: "Hi [Name]! Long time no see!", bn: "হাই [নাম]! অনেক দিন দেখা নেই!"},
                        {en: "Yo! How's it going?", bn: "ইয়ো! কেমন চলছে?"}
                    ]
                },
                introduction: {
                    formal: [
                        {en: "Allow me to introduce myself. I'm [Name].", bn: "আমাকে নিজের পরিচয় দিতে দিন। আমি [নাম]।"},
                        {en: "Hello, my name is [Name]. It's a pleasure to meet you.", bn: "হ্যালো, আমার নাম [নাম]। আপনার সাথে দেখা করে আনন্দিত।"},
                        {en: "I don't believe we've met. I'm [Name].", bn: "আমার মনে হয় না আমরা আগে দেখা করেছি। আমি [নাম]।"}
                    ],
                    neutral: [
                        {en: "Hi, I'm [Name].", bn: "হাই, আমি [নাম]।"},
                        {en: "Hello, my name is [Name].", bn: "হ্যালো, আমার নাম [নাম]।"},
                        {en: "Nice to meet you, I'm [Name].", bn: "আপনার সাথে দেখা করে ভালো লাগলো, আমি [নাম]।"}
                    ],
                    informal: [
                        {en: "Hey, I'm [Name]!", bn: "হেই, আমি [নাম]!"},
                        {en: "What's up? I'm [Name].", bn: "কি অবস্থা? আমি [নাম]।"},
                        {en: "[Name] here. Nice to meet you!", bn: "[নাম] এখানে। দেখা করে ভালো লাগলো!"}
                    ]
                },
                // Other scenarios follow the same pattern...
                smalltalk: {
                    formal: [
                        {en: "How have you been keeping?", bn: "আপনি কেমন আছেন?"},
                        {en: "Lovely weather we're having, isn't it?", bn: "আজকের আবহাওয়া চমৎকার, না কি?"},
                        {en: "Have you been keeping busy?", bn: "আপনি ব্যস্ত আছেন?"}
                    ],
                    neutral: [
                        {en: "How's your day going?", bn: "আপনার দিনটি কেমন যাচ্ছে?"},
                        {en: "What have you been up to lately?", bn: "আপনি সম্প্রতি কি করছেন?"},
                        {en: "Did you do anything interesting this weekend?", bn: "এই সপ্তাহান্তে আপনি কি কিছু আকর্ষণীয় করেছেন?"}
                    ],
                    informal: [
                        {en: "What's new with you?", bn: "আপনার সাথে কি নতুন?"},
                        {en: "How's life treating you?", bn: "জীবন আপনাকে কেমন যাচ্ছে?"},
                        {en: "Anything exciting happening?", bn: "কিছু উত্তেজনাপূর্ণ ঘটছে?"}
                    ]
                },
                compliment: {
                    formal: [
                        {en: "I must say, you've done an excellent job with [specific thing].", bn: "আমাকে বলতে হবে, আপনি [নির্দিষ্ট জিনিস] সাথে চমৎকার কাজ করেছেন।"},
                        {en: "You have a wonderful [specific quality].", bn: "আপনার একটি চমৎকার [নির্দিষ্ট গুণ] আছে।"},
                        {en: "I really admire your [specific skill/trait].", bn: "আমি সত্যিই আপনার [নির্দিষ্ট দক্ষতা/গুণ] প্রশংসা করি।"}
                    ],
                    neutral: [
                        {en: "I really like your [specific thing]!", bn: "আমি সত্যিই আপনার [নির্দিষ্ট জিনিস] পছন্দ করি!"},
                        {en: "You're really good at [specific skill].", bn: "আপনি [নির্দিষ্ট দক্ষতা] তে সত্যিই ভালো।"},
                        {en: "That's a great [specific item/idea]!", bn: "এটি একটি দুর্দান্ত [নির্দিষ্ট আইটেম/ধারণা]!"}
                    ],
                    informal: [
                        {en: "Wow, you're amazing at [specific thing]!", bn: "বাহ, আপনি [নির্দিষ্ট জিনিস] এ আশ্চর্যজনক!"},
                        {en: "Dude, that's awesome!", bn: "ভাই, এটা অসাধারণ!"},
                        {en: "You totally rock at [specific skill]!", bn: "আপনি সম্পূর্ণরূপে [নির্দিষ্ট দক্ষতা] তে দারুণ!"}
                    ]
                }
                // Other scenarios can be added similarly...
            };

            const professionalPhrases = {
                email: {
                    formal: [
                        {en: "Dear [Recipient],\n\nI hope this message finds you well.\n\n[Main content]\n\nBest regards,\n[Your Name]", bn: "প্রিয় [প্রাপক],\n\nআমি আশা করি এই বার্তাটি আপনাকে ভালো পাবে।\n\n[মূল বিষয়বস্তু]\n\nশুভেচ্ছান্তে,\n[আপনার নাম]"},
                        {en: "To whom it may concern,\n\nI am writing regarding [subject].\n\n[Main content]\n\nSincerely,\n[Your Name]", bn: "যার যার প্রাসঙ্গিক,\n\nআমি [বিষয়] সম্পর্কে লিখছি।\n\n[মূল বিষয়বস্তু]\n\nআন্তরিকভাবে,\n[আপনার নাম]"}
                    ],
                    polite: [
                        {en: "Hello [Name],\n\nI hope you're doing well.\n\n[Main content]\n\nThanks and best,\n[Your Name]", bn: "হ্যালো [নাম],\n\nআমি আশা করি আপনি ভালো আছেন।\n\n[মূল বিষয়বস্তু]\n\nধন্যবাদ ও শুভেচ্ছা,\n[আপনার নাম]"},
                        {en: "Hi [Name],\n\nJust reaching out about [subject].\n\n[Main content]\n\nBest,\n[Your Name]", bn: "হাই [নাম],\n\nশুধু [বিষয়] সম্পর্কে যোগাযোগ করছি।\n\n[মূল বিষয়বস্তু]\n\nশুভকামনা,\n[আপনার নাম]"}
                    ],
                    friendly: [
                        {en: "Hey [Name],\n\nQuick note about [subject].\n\n[Main content]\n\nTalk soon,\n[Your Name]", bn: "হেই [নাম],\n\n[বিষয়] সম্পর্কে একটি দ্রুত নোট।\n\n[মূল বিষয়বস্তু]\n\nশীঘ্রই কথা হবে,\n[আপনার নাম]"}
                    ]
                },
                meeting: {
                    formal: [
                        {en: "Thank you all for being here today.", bn: "আজ এখানে উপস্থিত থাকার জন্য আপনাদের সকলকে ধন্যবাদ।"},
                        {en: "Let's begin with the first agenda item.", bn: "চলুন প্রথম এজেন্ডা আইটেম দিয়ে শুরু করি।"},
                        {en: "Would anyone like to add anything before we move on?", bn: "আমরা এগোনোর আগে কি কেউ কিছু যোগ করতে চান?"}
                    ],
                    polite: [
                        {en: "Does anyone have thoughts on this?", bn: "এ সম্পর্কে কি কারো কোন মতামত আছে?"},
                        {en: "I'd appreciate everyone's input on this matter.", bn: "আমি এই বিষয়ে সবার মতামত প্রশংসা করব।"},
                        {en: "Could you please clarify that point?", bn: "আপনি কি দয়া করে সেই পয়েন্টটি স্পষ্ট করতে পারবেন?"}
                    ],
                    friendly: [
                        {en: "Thanks for joining, everyone!", bn: "সবাইকে যোগদানের জন্য ধন্যবাদ!"},
                        {en: "Let's dive right in.", bn: "চলুন সরাসরি শুরু করি।"},
                        {en: "Who wants to go first?", bn: "কে প্রথম শুরু করতে চান?"}
                    ]
                }
                // Other professional scenarios can be added similarly...
            };

            // DOM elements
            const generateSocialBtn = document.getElementById('generate-social');
            const generateProfessionalBtn = document.getElementById('generate-professional');
            const generateCustomBtn = document.getElementById('generate-custom');
            const resultContent = document.getElementById('result-content');
            const practiceSpeechBtn = document.getElementById('practice-speech');
            const copyTextBtn = document.getElementById('copy-text');
            const showTranslationBtn = document.getElementById('show-translation');
            const translationContainer = document.getElementById('translation-container');
            const bengaliTranslation = document.getElementById('bengali-translation');
            const recordingUI = document.getElementById('recording-ui');
            const startRecordingBtn = document.getElementById('start-recording');
            const stopRecordingBtn = document.getElementById('stop-recording');
            const recordingStatus = document.getElementById('recording-status');
            const recordedAudio = document.getElementById('recorded-audio');

            // Audio recording variables
            let mediaRecorder;
            let audioChunks = [];
            let isRecording = false;

            // Generate social phrases
            generateSocialBtn.addEventListener('click', function() {
                const scenario = document.getElementById('social-scenario').value;
                const context = document.getElementById('social-context').value;
                
                if (!socialPhrases[scenario] || !socialPhrases[scenario][context]) {
                    displayResult("Please select valid options for scenario and context.", "");
                    return;
                }
                
                const phrases = socialPhrases[scenario][context];
                const randomPhrases = [];
                const randomTranslations = [];
                
                // Get 3 random phrases or all if less than 3
                const count = Math.min(3, phrases.length);
                const usedIndices = new Set();
                
                while (randomPhrases.length < count && usedIndices.size < phrases.length) {
                    const randomIndex = Math.floor(Math.random() * phrases.length);
                    if (!usedIndices.has(randomIndex)) {
                        usedIndices.add(randomIndex);
                        randomPhrases.push(phrases[randomIndex].en);
                        randomTranslations.push(phrases[randomIndex].bn);
                    }
                }
                
                displayResult(randomPhrases.join('<br><br>'), randomTranslations.join('<br><br>'));
            });

            // Generate professional phrases
            generateProfessionalBtn.addEventListener('click', function() {
                const scenario = document.getElementById('professional-scenario').value;
                const tone = document.getElementById('professional-tone').value;
                
                if (!professionalPhrases[scenario] || !professionalPhrases[scenario][tone]) {
                    displayResult("Please select valid options for scenario and tone.", "");
                    return;
                }
                
                const phrases = professionalPhrases[scenario][tone];
                const randomPhrases = [];
                const randomTranslations = [];
                
                // Get 3 random phrases or all if less than 3
                const count = Math.min(3, phrases.length);
                const usedIndices = new Set();
                
                while (randomPhrases.length < count && usedIndices.size < phrases.length) {
                    const randomIndex = Math.floor(Math.random() * phrases.length);
                    if (!usedIndices.has(randomIndex)) {
                        usedIndices.add(randomIndex);
                        randomPhrases.push(phrases[randomIndex].en);
                        randomTranslations.push(phrases[randomIndex].bn);
                    }
                }
                
                displayResult(randomPhrases.join('<br><br>'), randomTranslations.join('<br><br>'));
            });

            // Generate custom response
            generateCustomBtn.addEventListener('click', function() {
                const scenario = document.querySelector('.lang-en').style.display === 'none' ? 
                    document.getElementById('custom-scenario-bn').value.trim() : 
                    document.getElementById('custom-scenario').value.trim();
                const tone = document.getElementById('custom-tone').value;
                
                if (!scenario) {
                    displayResult(
                        "Please describe your situation first.", 
                        "অনুগ্রহ করে প্রথমে আপনার পরিস্থিতি বর্ণনা করুন।"
                    );
                    return;
                }
                
                const response = generateCustomResponse(scenario, tone);
                displayResult(response.en, response.bn);
            });

            // Display result with translation
            function displayResult(content, translation) {
                resultContent.innerHTML = `<p>${content}</p>`;
                bengaliTranslation.innerHTML = translation;
                practiceSpeechBtn.style.display = 'inline-block';
                copyTextBtn.style.display = 'inline-block';
                showTranslationBtn.style.display = 'inline-block';
                translationContainer.style.display = 'none';
                recordingUI.style.display = 'none';
            }

            // Enhanced custom response generator with Bengali
            function generateCustomResponse(scenario, tone) {
                const toneData = {
                    polite: {
                        starters: {
                            en: ["Could you possibly", "Would you mind", "I'd really appreciate it if", "Might I ask you to", "Please"],
                            bn: ["আপনি কি সম্ভবত", "আপনি কি মনে করবেন", "আমি সত্যিই কৃতজ্ঞ হব যদি", "আমি কি আপনাকে জিজ্ঞাসা করতে পারি", "অনুগ্রহ করে"]
                        },
                        closers: {
                            en: ["Thank you so much for your understanding.", "I truly appreciate your help with this.", "Thanks in advance for your consideration."],
                            bn: ["আপনার বোঝার জন্য আপনাকে অনেক ধন্যবাদ।", "এটি নিয়ে আপনার সাহায্য আমি সত্যিই প্রশংসা করি।", "আপনার বিবেচনার জন্য আগাম ধন্যবাদ।"]
                        }
                    },
                    friendly: {
                        starters: {
                            en: ["Hey, could you", "Would you be able to", "Do you think you could", "Can you", "Let's"],
                            bn: ["হেই, আপনি কি", "আপনি কি পারবেন", "আপনি কি মনে করেন আপনি পারবেন", "আপনি কি পারেন", "চলুন"]
                        },
                        closers: {
                            en: ["Thanks a bunch!", "I owe you one!", "Appreciate it!", "You're the best!"],
                            bn: ["অনেক ধন্যবাদ!", "আমি আপনার কাছে ঋণী!", "এটির প্রশংসা করুন!", "আপনি সেরা!"]
                        }
                    }
                    // Other tones can be added similarly...
                };
                
                const currentTone = toneData[tone] || toneData.polite;
                const starterEn = currentTone.starters.en[Math.floor(Math.random() * currentTone.starters.en.length)];
                const starterBn = currentTone.starters.bn[Math.floor(Math.random() * currentTone.starters.bn.length)];
                const closerEn = currentTone.closers.en[Math.floor(Math.random() * currentTone.closers.en.length)];
                const closerBn = currentTone.closers.bn[Math.floor(Math.random() * currentTone.closers.bn.length)];
                
                // For demonstration, we'll just return the scenario with starter/closer
                // In a real app, you'd want to process the scenario more carefully
                return {
                    en: `${starterEn} ${scenario}. ${closerEn}`,
                    bn: `${starterBn} ${scenario}. ${closerBn}`
                };
            }

            // Toggle translation visibility
            showTranslationBtn.addEventListener('click', function() {
                if (translationContainer.style.display === 'none') {
                    translationContainer.style.display = 'block';
                    showTranslationBtn.innerHTML = `<i class="fas fa-language"></i> <span class="lang-en">Hide Translation</span><span class="lang-bn" style="display: none;">অনুবাদ লুকান</span>`;
                } else {
                    translationContainer.style.display = 'none';
                    showTranslationBtn.innerHTML = `<i class="fas fa-language"></i> <span class="lang-en">Show Translation</span><span class="lang-bn" style="display: none;">অনুবাদ দেখুন</span>`;
                }
            });

            // Practice speech functionality
            practiceSpeechBtn.addEventListener('click', function() {
                const content = resultContent.textContent;
                if (content && !content.includes("Your generated English phrases will appear here.")) {
                    if ('speechSynthesis' in window) {
                        const utterance = new SpeechSynthesisUtterance(content);
                        utterance.rate = 0.9;
                        utterance.pitch = 1;
                        utterance.lang = 'en-US';
                        
                        // Show recording UI after speech ends
                        utterance.onend = function() {
                            recordingUI.style.display = 'block';
                            recordedAudio.style.display = 'none';
                        };
                        
                        speechSynthesis.speak(utterance);
                    } else {
                        alert('Text-to-speech not supported in your browser');
                    }
                } else {
                    alert('Please generate some content first');
                }
            });

            // Copy text functionality
            copyTextBtn.addEventListener('click', function() {
                const content = resultContent.textContent;
                if (content && !content.includes("Your generated English phrases will appear here.")) {
                    navigator.clipboard.writeText(content)
                        .then(() => {
                            const originalText = copyTextBtn.innerHTML;
                            copyTextBtn.innerHTML = '<i class="fas fa-check"></i> <span class="lang-en">Copied!</span><span class="lang-bn" style="display: none;">কপি হয়েছে!</span>';
                            setTimeout(() => {
                                copyTextBtn.innerHTML = originalText;
                            }, 2000);
                        })
                        .catch(err => {
                            console.error('Failed to copy: ', err);
                        });
                }
            });

            // Initialize recording functionality
            startRecordingBtn.addEventListener('click', async function() {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    mediaRecorder = new MediaRecorder(stream);
                    audioChunks = [];
                    
                    mediaRecorder.ondataavailable = function(e) {
                        audioChunks.push(e.data);
                    };
                    
                    mediaRecorder.onstop = function() {
                        const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                        const audioUrl = URL.createObjectURL(audioBlob);
                        recordedAudio.src = audioUrl;
                        recordedAudio.style.display = 'block';
                        
                        // Stop all tracks in the stream
                        stream.getTracks().forEach(track => track.stop());
                    };
                    
                    mediaRecorder.start();
                    isRecording = true;
                    startRecordingBtn.style.display = 'none';
                    stopRecordingBtn.style.display = 'inline-block';
                    recordingStatus.textContent = document.querySelector('.lang-en').style.display === 'none' ? 
                        "রেকর্ডিং হচ্ছে... এখন কথা বলুন!" : 
                        "Recording... Speak now!";
                    recordingStatus.classList.add('pulse');
                    
                } catch (err) {
                    console.error('Error accessing microphone:', err);
                    recordingStatus.textContent = document.querySelector('.lang-en').style.display === 'none' ? 
                        "মাইক্রোফোন অ্যাক্সেস করতে ত্রুটি। অনুমতি পরীক্ষা করুন।" : 
                        "Error accessing microphone. Please check permissions.";
                }
            });
            
            stopRecordingBtn.addEventListener('click', function() {
                if (isRecording && mediaRecorder) {
                    mediaRecorder.stop();
                    isRecording = false;
                    stopRecordingBtn.style.display = 'none';
                    startRecordingBtn.style.display = 'inline-block';
                    recordingStatus.textContent = document.querySelector('.lang-en').style.display === 'none' ? 
                        "রেকর্ডিং সম্পূর্ণ। মডেল উচ্চারণের সাথে তুলনা করতে আপনার অডিও প্লে করুন।" : 
                        "Recording complete. Play back your audio to compare with the model.";
                    recordingStatus.classList.remove('pulse');
                }
            });
        });
    </script>
</body>
</html>
