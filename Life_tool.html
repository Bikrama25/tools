<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life Optimization Tool - IKIGAI & Kaizen</title>
    <style>
        :root {
            --primary: #4a6fa5;
            --secondary: #166088;
            --accent: #4fc3f7;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #17a2b8;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 2rem 0;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            margin: 0;
            font-size: 2.5rem;
        }
        
        h2 {
            color: var(--secondary);
            border-bottom: 2px solid var(--accent);
            padding-bottom: 0.5rem;
            margin-top: 2rem;
        }
        
        .section {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .progress-container {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 20px;
            margin: 1rem 0;
        }
        
        .progress-bar {
            height: 20px;
            border-radius: 20px;
            background-color: var(--success);
            text-align: center;
            line-height: 20px;
            color: white;
        }
        
        button, .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover, .btn:hover {
            background-color: var(--secondary);
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: var(--dark);
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn-info {
            background-color: var(--info);
        }
        
        textarea, input, select {
            width: 100%;
            padding: 0.5rem;
            margin: 0.5rem 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .habit-tracker {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        
        .habit {
            flex: 1;
            min-width: 150px;
            text-align: center;
            margin: 0.5rem;
        }
        
        .habit-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #e9ecef;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .habit-circle.completed {
            background-color: var(--success);
            color: white;
        }
        
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .calendar-day {
            border: 1px solid #ddd;
            padding: 5px;
            min-height: 60px;
        }
        
        .calendar-day.today {
            background-color: #e3f2fd;
            border: 2px solid var(--accent);
        }
        
        .day-number {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .event {
            font-size: 0.8rem;
            background-color: #e8f5e9;
            padding: 2px;
            margin: 2px 0;
            border-radius: 2px;
        }
        
        .ikigai-diagram {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 10px;
            height: 500px;
            margin: 2rem 0;
        }
        
        .ikigai-quadrant {
            border: 2px solid var(--dark);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .ikigai-quadrant:nth-child(1) {
            border-color: var(--success);
            background-color: rgba(40, 167, 69, 0.1);
        }
        
        .ikigai-quadrant:nth-child(2) {
            border-color: var(--primary);
            background-color: rgba(74, 111, 165, 0.1);
        }
        
        .ikigai-quadrant:nth-child(3) {
            border-color: var(--warning);
            background-color: rgba(255, 193, 7, 0.1);
        }
        
        .ikigai-quadrant:nth-child(4) {
            border-color: var(--danger);
            background-color: rgba(220, 53, 69, 0.1);
        }
        
        .quadrant-title {
            font-weight: bold;
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .timer-display {
            font-size: 3rem;
            text-align: center;
            margin: 1rem 0;
        }
        
        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }
        
        .task-list {
            list-style-type: none;
            padding: 0;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .task-item input[type="checkbox"] {
            margin-right: 1rem;
        }
        
        .task-item .task-text {
            flex-grow: 1;
        }
        
        .task-item .task-due {
            font-size: 0.8rem;
            color: #666;
            margin-right: 1rem;
        }
        
        .task-item.completed .task-text {
            text-decoration: line-through;
            color: #999;
        }
        
        .reminder-badge {
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .habit-tracker {
                flex-direction: column;
            }
            
            .ikigai-diagram {
                height: auto;
                grid-template-columns: 1fr;
                grid-template-rows: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Life Optimization Tool</h1>
            <p>Integrating IKIGAI, Kaizen, and holistic self-improvement</p>
        </header>
        
        <!-- Task Management Section -->
        <section class="section">
            <h2>Task Management & Reminders</h2>
            <div class="grid">
                <div class="card">
                    <h3>My Tasks</h3>
                    <div class="input-group">
                        <input type="text" id="new-task" placeholder="Add new task...">
                        <input type="datetime-local" id="task-due">
                        <button class="btn-success" id="add-task">Add Task</button>
                    </div>
                    <ul class="task-list" id="task-list">
                        <!-- Tasks will be added here dynamically -->
                    </ul>
                    <div class="progress-container">
                        <div class="progress-bar" id="task-progress" style="width: 0%;">0%</div>
                    </div>
                </div>
                <div class="card">
                    <h3>Upcoming Reminders <span class="reminder-badge" id="reminder-count">0</span></h3>
                    <ul id="reminder-list">
                        <!-- Reminders will be added here dynamically -->
                    </ul>
                    <div style="margin-top: 1rem;">
                        <p>Set a reminder:</p>
                        <input type="text" id="reminder-text" placeholder="Reminder text">
                        <input type="datetime-local" id="reminder-time">
                        <button class="btn-info" id="set-reminder">Set Reminder</button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- IKIGAI Section -->
        <section class="section">
            <h2>Discover Your IKIGAI</h2>
            <div class="ikigai-diagram">
                <div class="ikigai-quadrant">
                    <div class="quadrant-title">What You LOVE</div>
                    <textarea id="love-text" placeholder="Activities that bring you joy and fulfillment..." rows="5"></textarea>
                </div>
                <div class="ikigai-quadrant">
                    <div class="quadrant-title">What You're GOOD AT</div>
                    <textarea id="good-at-text" placeholder="Your skills, talents, and expertise..." rows="5"></textarea>
                </div>
                <div class="ikigai-quadrant">
                    <div class="quadrant-title">What the World NEEDS</div>
                    <textarea id="needs-text" placeholder="Problems you can help solve, services you can provide..." rows="5"></textarea>
                </div>
                <div class="ikigai-quadrant">
                    <div class="quadrant-title">What You Can Be PAID FOR</div>
                    <textarea id="paid-text" placeholder="Ways you can monetize your skills and passions..." rows="5"></textarea>
                </div>
            </div>
            <div style="text-align: center; margin-top: 2rem;">
                <button id="analyze-ikigai" class="btn-success">Analyze My IKIGAI</button>
                <button id="save-ikigai" class="btn-info">Save IKIGAI</button>
            </div>
            <div id="ikigai-result" style="display: none; margin-top: 2rem; padding: 1rem; background-color: #e8f5e9; border-radius: 8px;">
                <h3>Your IKIGAI Potential</h3>
                <p id="ikigai-suggestion"></p>
            </div>
        </section>
        
        <!-- Daily Kaizen Section -->
        <section class="section">
            <h2>Daily Kaizen (Continuous Improvement)</h2>
            <div class="grid">
                <div class="card">
                    <h3>Today's Small Improvement</h3>
                    <input type="text" id="today-improvement" placeholder="What small improvement will you make today?">
                    <button id="commit-improvement" class="btn-success">Commit to This Change</button>
                    <div id="improvement-list" style="margin-top: 1rem;">
                        <!-- Improvements will be listed here -->
                    </div>
                </div>
                <div class="card">
                    <h3>Yesterday's Reflection</h3>
                    <p>What worked well yesterday?</p>
                    <textarea id="worked-well" rows="3"></textarea>
                    <p>What could be improved?</p>
                    <textarea id="needs-improvement" rows="3"></textarea>
                    <button id="save-reflection" class="btn-info">Save Reflection</button>
                    <div id="reflection-history" style="margin-top: 1rem;">
                        <!-- Reflection history will be shown here -->
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Habit Tracker Section -->
        <section class="section">
            <h2>Daily Habit Tracker</h2>
            <div class="habit-tracker">
                <div class="habit">
                    <div class="habit-circle" data-habit="water">0/8</div>
                    <h4>Water (glasses)</h4>
                </div>
                <div class="habit">
                    <div class="habit-circle" data-habit="exercise">0/1</div>
                    <h4>Exercise</h4>
                </div>
                <div class="habit">
                    <div class="habit-circle" data-habit="meditation">0/1</div>
                    <h4>Meditation</h4>
                </div>
                <div class="habit">
                    <div class="habit-circle" data-habit="learning">0/1</div>
                    <h4>Learning</h4>
                </div>
                <div class="habit">
                    <div class="habit-circle" data-habit="family">0/1</div>
                    <h4>Family Time</h4>
                </div>
                <div class="habit">
                    <div class="habit-circle" data-habit="addiction-free">0/1</div>
                    <h4>Addiction-Free</h4>
                </div>
                <div class="habit">
                    <div class="habit-circle" data-habit="diabetes">0/1</div>
                    <h4>Diabetes Check</h4>
                </div>
            </div>
            <div style="text-align: center; margin-top: 2rem;">
                <button id="reset-habits" class="btn-warning">Reset Day</button>
                <button id="save-habits" class="btn-success">Save Progress</button>
            </div>
        </section>
        
        <!-- Diabetes Control Section -->
        <section class="section">
            <h2>Diabetes Management</h2>
            <div class="grid">
                <div class="card">
                    <h3>Blood Sugar Tracker</h3>
                    <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                        <div style="flex: 1;">
                            <label for="blood-sugar-value">Reading (mg/dL)</label>
                            <input type="number" id="blood-sugar-value" placeholder="e.g., 120">
                        </div>
                        <div style="flex: 1;">
                            <label for="blood-sugar-time">Time</label>
                            <select id="blood-sugar-time">
                                <option value="fasting">Fasting</option>
                                <option value="before-breakfast">Before Breakfast</option>
                                <option value="after-breakfast">After Breakfast</option>
                                <option value="before-lunch">Before Lunch</option>
                                <option value="after-lunch">After Lunch</option>
                                <option value="before-dinner">Before Dinner</option>
                                <option value="after-dinner">After Dinner</option>
                                <option value="bedtime">Bedtime</option>
                            </select>
                        </div>
                    </div>
                    <button id="record-blood-sugar" class="btn-success">Record Reading</button>
                    <div id="blood-sugar-history" style="margin-top: 1rem;">
                        <h4>Recent Readings</h4>
                        <div id="blood-sugar-readings">
                            <!-- Readings will be added here -->
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3>Medication & Reminders</h3>
                    <div style="margin-bottom: 1rem;">
                        <input type="text" id="medication-name" placeholder="Medication name">
                        <input type="time" id="medication-time">
                        <button id="add-medication" class="btn-info">Add Medication</button>
                    </div>
                    <div id="medication-list">
                        <h4>Scheduled Medications</h4>
                        <ul id="medication-schedule">
                            <!-- Medications will be listed here -->
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Learning & Revision Section -->
        <section class="section">
            <h2>Learning & Revision</h2>
            <div class="grid">
                <div class="card">
                    <h3>Fixed Revision Schedule</h3>
                    <p>Set your daily revision time (15-30 minutes recommended):</p>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <select id="revision-minutes" style="flex: 1;">
                            <option value="15">15 minutes</option>
                            <option value="20">20 minutes</option>
                            <option value="25">25 minutes</option>
                            <option value="30">30 minutes</option>
                        </select>
                        <input type="time" id="revision-time" style="flex: 1;">
                        <button id="set-revision" class="btn-success" style="flex: 1;">Set Daily Revision</button>
                    </div>
                    <div id="revision-status" style="margin-top: 1rem; padding: 1rem; background-color: #e3f2fd; border-radius: 4px; display: none;">
                        <p>Daily revision set for <span id="revision-time-display"></span> (<span id="revision-duration-display"></span> minutes)</p>
                        <button id="start-revision-now" class="btn-info">Start Revision Now</button>
                    </div>
                </div>
                <div class="card">
                    <h3>Learning Progress</h3>
                    <div style="margin-bottom: 1rem;">
                        <input type="text" id="learning-topic" placeholder="Topic/subject">
                        <textarea id="learning-notes" placeholder="Notes..."></textarea>
                        <button id="save-learning" class="btn-success">Save Progress</button>
                    </div>
                    <div id="learning-history">
                        <h4>Recent Learning Sessions</h4>
                        <ul id="learning-sessions">
                            <!-- Learning sessions will be listed here -->
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Other sections (Focus & Productivity, Addiction Control, Relationships, etc.) would follow similarly -->
        
    </div>
    
    <script>
        // Data storage
        let appData = {
            tasks: [],
            reminders: [],
            habits: {
                water: 0,
                exercise: false,
                meditation: false,
                learning: false,
                family: false,
                addictionFree: false,
                diabetesCheck: false
            },
            ikigai: {
                love: '',
                goodAt: '',
                needs: '',
                paid: ''
            },
            reflections: [],
            improvements: [],
            bloodSugarReadings: [],
            medications: [],
            revisionSchedule: null,
            learningSessions: []
        };

        // Load data from localStorage
        function loadData() {
            const savedData = localStorage.getItem('lifeOptimizationData');
            if (savedData) {
                appData = JSON.parse(savedData);
                updateUI();
            }
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('lifeOptimizationData', JSON.stringify(appData));
        }

        // Update UI based on current data
        function updateUI() {
            updateTaskList();
            updateReminderList();
            updateHabitTracker();
            updateReflectionHistory();
            updateImprovementList();
            updateBloodSugarReadings();
            updateMedicationList();
            updateRevisionStatus();
            updateLearningSessions();
            updateIkigaiFields();
        }

        // Task Management
        function updateTaskList() {
            const taskList = document.getElementById('task-list');
            taskList.innerHTML = '';
            
            appData.tasks.forEach((task, index) => {
                const li = document.createElement('li');
                li.className = `task-item ${task.completed ? 'completed' : ''}`;
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = task.completed;
                checkbox.addEventListener('change', () => {
                    appData.tasks[index].completed = checkbox.checked;
                    saveData();
                    updateTaskList();
                    updateTaskProgress();
                });
                
                const taskText = document.createElement('span');
                taskText.className = 'task-text';
                taskText.textContent = task.text;
                
                const dueDate = document.createElement('span');
                dueDate.className = 'task-due';
                if (task.due) {
                    dueDate.textContent = new Date(task.due).toLocaleString();
                }
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn-danger';
                deleteBtn.textContent = 'X';
                deleteBtn.style.padding = '0.2rem 0.5rem';
                deleteBtn.style.marginLeft = '0.5rem';
                deleteBtn.addEventListener('click', () => {
                    appData.tasks.splice(index, 1);
                    saveData();
                    updateTaskList();
                    updateTaskProgress();
                });
                
                li.appendChild(checkbox);
                li.appendChild(taskText);
                li.appendChild(dueDate);
                li.appendChild(deleteBtn);
                taskList.appendChild(li);
            });
            
            updateTaskProgress();
        }

        function updateTaskProgress() {
            const totalTasks = appData.tasks.length;
            const completedTasks = appData.tasks.filter(task => task.completed).length;
            const progress = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
            
            const progressBar = document.getElementById('task-progress');
            progressBar.style.width = `${progress}%`;
            progressBar.textContent = `${progress}%`;
        }

        // Reminder Management
        function updateReminderList() {
            const reminderList = document.getElementById('reminder-list');
            reminderList.innerHTML = '';
            
            const now = new Date();
            const upcomingReminders = appData.reminders.filter(reminder => new Date(reminder.time) > now);
            
            document.getElementById('reminder-count').textContent = upcomingReminders.length;
            
            upcomingReminders.forEach((reminder, index) => {
                const li = document.createElement('li');
                li.className = 'task-item';
                
                const reminderText = document.createElement('span');
                reminderText.className = 'task-text';
                reminderText.textContent = reminder.text;
                
                const dueDate = document.createElement('span');
                dueDate.className = 'task-due';
                dueDate.textContent = new Date(reminder.time).toLocaleString();
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn-danger';
                deleteBtn.textContent = 'X';
                deleteBtn.style.padding = '0.2rem 0.5rem';
                deleteBtn.style.marginLeft = '0.5rem';
                deleteBtn.addEventListener('click', () => {
                    appData.reminders.splice(index, 1);
                    saveData();
                    updateReminderList();
                });
                
                li.appendChild(reminderText);
                li.appendChild(dueDate);
                li.appendChild(deleteBtn);
                reminderList.appendChild(li);
            });
            
            checkReminders();
        }

        function checkReminders() {
            const now = new Date();
            appData.reminders.forEach(reminder => {
                const reminderTime = new Date(reminder.time);
                if (reminderTime <= now && !reminder.notified) {
                    alert(`REMINDER: ${reminder.text}`);
                    reminder.notified = true;
                    saveData();
                }
            });
        }

        // Habit Tracker
        function updateHabitTracker() {
            document.querySelector('[data-habit="water"]').textContent = `${appData.habits.water}/8`;
            if (appData.habits.water >= 8) {
                document.querySelector('[data-habit="water"]').classList.add('completed');
            } else {
                document.querySelector('[data-habit="water"]').classList.remove('completed');
            }
            
            const binaryHabits = ['exercise', 'meditation', 'learning', 'family', 'addictionFree', 'diabetesCheck'];
            binaryHabits.forEach(habit => {
                const element = document.querySelector(`[data-habit="${habit}"]`);
                element.textContent = `${appData.habits[habit] ? '1' : '0'}/1`;
                if (appData.habits[habit]) {
                    element.classList.add('completed');
                } else {
                    element.classList.remove('completed');
                }
            });
        }

        // Reflection & Improvement
        function updateReflectionHistory() {
            const historyDiv = document.getElementById('reflection-history');
            historyDiv.innerHTML = '<h4>Recent Reflections</h4>';
            
            const recentReflections = appData.reflections.slice(-3).reverse();
            recentReflections.forEach(reflection => {
                const div = document.createElement('div');
                div.style.marginBottom = '1rem';
                div.style.padding = '0.5rem';
                div.style.border = '1px solid #eee';
                div.style.borderRadius = '4px';
                
                const date = document.createElement('p');
                date.style.fontWeight = 'bold';
                date.textContent = new Date(reflection.date).toLocaleDateString();
                
                const workedWell = document.createElement('p');
                workedWell.textContent = `What worked: ${reflection.workedWell}`;
                
                const needsImprovement = document.createElement('p');
                needsImprovement.textContent = `To improve: ${reflection.needsImprovement}`;
                
                div.appendChild(date);
                div.appendChild(workedWell);
                div.appendChild(needsImprovement);
                historyDiv.appendChild(div);
            });
        }

        function updateImprovementList() {
            const improvementDiv = document.getElementById('improvement-list');
            improvementDiv.innerHTML = '<h4>Recent Improvements</h4>';
            
            const recentImprovements = appData.improvements.slice(-5).reverse();
            recentImprovements.forEach(improvement => {
                const div = document.createElement('div');
                div.style.marginBottom = '0.5rem';
                div.style.padding = '0.5rem';
                div.style.borderLeft = '3px solid var(--success)';
                
                const date = document.createElement('span');
                date.style.fontSize = '0.8rem';
                date.style.color = '#666';
                date.textContent = new Date(improvement.date).toLocaleDateString() + ': ';
                
                const text = document.createElement('span');
                text.textContent = improvement.text;
                
                div.appendChild(date);
                div.appendChild(text);
                improvementDiv.appendChild(div);
            });
        }

        // Diabetes Management
        function updateBloodSugarReadings() {
            const readingsDiv = document.getElementById('blood-sugar-readings');
            readingsDiv.innerHTML = '';
            
            const recentReadings = appData.bloodSugarReadings.slice(-5).reverse();
            recentReadings.forEach(reading => {
                const div = document.createElement('div');
                div.style.display = 'flex';
                div.style.justifyContent = 'space-between';
                div.style.padding = '0.5rem';
                div.style.borderBottom = '1px solid #eee';
                
                const value = document.createElement('span');
                value.textContent = `${reading.value} mg/dL`;
                value.style.fontWeight = reading.value > 180 ? 'bold' : 'normal';
                value.style.color = reading.value > 180 ? 'var(--danger)' : (reading.value < 70 ? 'var(--warning)' : 'var(--success)');
                
                const time = document.createElement('span');
                time.textContent = `${reading.time} (${new Date(reading.date).toLocaleDateString()})`;
                
                div.appendChild(value);
                div.appendChild(time);
                readingsDiv.appendChild(div);
            });
        }

        function updateMedicationList() {
            const medList = document.getElementById('medication-schedule');
            medList.innerHTML = '';
            
            appData.medications.forEach((med, index) => {
                const li = document.createElement('li');
                li.style.marginBottom = '0.5rem';
                
                const medText = document.createElement('span');
                medText.textContent = `${med.name} at ${med.time}`;
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn-danger';
                deleteBtn.textContent = 'X';
                deleteBtn.style.padding = '0.2rem 0.5rem';
                deleteBtn.style.marginLeft = '0.5rem';
                deleteBtn.addEventListener('click', () => {
                    appData.medications.splice(index, 1);
                    saveData();
                    updateMedicationList();
                });
                
                li.appendChild(medText);
                li.appendChild(deleteBtn);
                medList.appendChild(li);
            });
        }

        // Learning & Revision
        function updateRevisionStatus() {
            const statusDiv = document.getElementById('revision-status');
            if (appData.revisionSchedule) {
                statusDiv.style.display = 'block';
                document.getElementById('revision-time-display').textContent = appData.revisionSchedule.time;
                document.getElementById('revision-duration-display').textContent = appData.revisionSchedule.minutes;
                
                // Check if it's time for revision
                const now = new Date();
                const revisionTime = new Date();
                const [hours, minutes] = appData.revisionSchedule.time.split(':');
                revisionTime.setHours(parseInt(hours), parseInt(minutes));
                
                if (now.getHours() === revisionTime.getHours() && now.getMinutes() === revisionTime.getMinutes()) {
                    if (!appData.revisionSchedule.notifiedToday) {
                        alert(`Time for your ${appData.revisionSchedule.minutes}-minute revision session!`);
                        appData.revisionSchedule.notifiedToday = true;
                        saveData();
                    }
                } else if (now.getDate() !== revisionTime.getDate()) {
                    // Reset notification for new day
                    appData.revisionSchedule.notifiedToday = false;
                    saveData();
                }
            } else {
                statusDiv.style.display = 'none';
            }
        }

        function updateLearningSessions() {
            const sessionsList = document.getElementById('learning-sessions');
            sessionsList.innerHTML = '';
            
            const recentSessions = appData.learningSessions.slice(-5).reverse();
            recentSessions.forEach(session => {
                const li = document.createElement('li');
                li.style.marginBottom = '0.5rem';
                
                const topic = document.createElement('div');
                topic.style.fontWeight = 'bold';
                topic.textContent = session.topic;
                
                const date = document.createElement('div');
                date.style.fontSize = '0.8rem';
                date.style.color = '#666';
                date.textContent = new Date(session.date).toLocaleString();
                
                const notes = document.createElement('div');
                notes.style.fontSize = '0.9rem';
                notes.textContent = session.notes;
                
                li.appendChild(topic);
                li.appendChild(date);
                li.appendChild(notes);
                sessionsList.appendChild(li);
            });
        }

        // IKIGAI
        function updateIkigaiFields() {
            document.getElementById('love-text').value = appData.ikigai.love;
            document.getElementById('good-at-text').value = appData.ikigai.goodAt;
            document.getElementById('needs-text').value = appData.ikigai.needs;
            document.getElementById('paid-text').value = appData.ikigai.paid;
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            
            // Task Management
            document.getElementById('add-task').addEventListener('click', function() {
                const taskText = document.getElementById('new-task').value.trim();
                const dueDate = document.getElementById('task-due').value;
                
                if (taskText) {
                    appData.tasks.push({
                        text: taskText,
                        due: dueDate,
                        completed: false
                    });
                    saveData();
                    updateTaskList();
                    document.getElementById('new-task').value = '';
                    document.getElementById('task-due').value = '';
                }
            });
            
            // Reminders
            document.getElementById('set-reminder').addEventListener('click', function() {
                const reminderText = document.getElementById('reminder-text').value.trim();
                const reminderTime = document.getElementById('reminder-time').value;
                
                if (reminderText && reminderTime) {
                    appData.reminders.push({
                        text: reminderText,
                        time: reminderTime,
                        notified: false
                    });
                    saveData();
                    updateReminderList();
                    document.getElementById('reminder-text').value = '';
                    document.getElementById('reminder-time').value = '';
                }
            });
            
            // Habit Tracker
            const habitCircles = document.querySelectorAll('.habit-circle');
            habitCircles.forEach(circle => {
                circle.addEventListener('click', function() {
                    const habit = this.getAttribute('data-habit');
                    
                    if (habit === 'water') {
                        if (appData.habits.water < 8) {
                            appData.habits.water++;
                        }
                    } else {
                        appData.habits[habit] = !appData.habits[habit];
                    }
                    
                    saveData();
                    updateHabitTracker();
                });
            });
            
            document.getElementById('reset-habits').addEventListener('click', function() {
                appData.habits = {
                    water: 0,
                    exercise: false,
                    meditation: false,
                    learning: false,
                    family: false,
                    addictionFree: false,
                    diabetesCheck: false
                };
                saveData();
                updateHabitTracker();
            });
            
            document.getElementById('save-habits').addEventListener('click', function() {
                saveData();
                alert('Daily habits saved!');
            });
            
            // Reflections & Improvements
            document.getElementById('save-reflection').addEventListener('click', function() {
                const workedWell = document.getElementById('worked-well').value.trim();
                const needsImprovement = document.getElementById('needs-improvement').value.trim();
                
                if (workedWell || needsImprovement) {
                    appData.reflections.push({
                        date: new Date().toISOString(),
                        workedWell: workedWell,
                        needsImprovement: needsImprovement
                    });
                    saveData();
                    updateReflectionHistory();
                    document.getElementById('worked-well').value = '';
                    document.getElementById('needs-improvement').value = '';
                }
            });
            
            document.getElementById('commit-improvement').addEventListener('click', function() {
                const improvement = document.getElementById('today-improvement').value.trim();
                
                if (improvement) {
                    appData.improvements.push({
                        date: new Date().toISOString(),
                        text: improvement
                    });
                    saveData();
                    updateImprovementList();
                    document.getElementById('today-improvement').value = '';
                }
            });
            
            // Diabetes Management
            document.getElementById('record-blood-sugar').addEventListener('click', function() {
                const value = parseInt(document.getElementById('blood-sugar-value').value);
                const time = document.getElementById('blood-sugar-time').value;
                
                if (!isNaN(value)) {
                    appData.bloodSugarReadings.push({
                        date: new Date().toISOString(),
                        value: value,
                        time: time
                    });
                    saveData();
                    updateBloodSugarReadings();
                    document.getElementById('blood-sugar-value').value = '';
                }
            });
            
                        // Medications
            document.getElementById('add-medication').addEventListener('click', function() {
                const name = document.getElementById('medication-name').value.trim();
                const time = document.getElementById('medication-time').value;
                
                if (name && time) {
                    appData.medications.push({
                        name: name,
                        time: time
                    });
                    saveData();
                    updateMedicationList();
                    document.getElementById('medication-name').value = '';
                    document.getElementById('medication-time').value = '';
                }
            });
            
            // Learning & Revision
            document.getElementById('set-revision').addEventListener('click', function() {
                const minutes = document.getElementById('revision-minutes').value;
                const time = document.getElementById('revision-time').value;
                
                if (time) {
                    appData.revisionSchedule = {
                        minutes: minutes,
                        time: time,
                        notifiedToday: false
                    };
                    saveData();
                    updateRevisionStatus();
                    alert(`Daily revision scheduled for ${time} (${minutes} minutes)`);
                }
            });
            
            document.getElementById('start-revision-now').addEventListener('click', function() {
                if (appData.revisionSchedule) {
                    const minutes = parseInt(appData.revisionSchedule.minutes);
                    alert(`Starting ${minutes}-minute revision session now!`);
                    // In a real app, you would start a timer here
                }
            });
            
            document.getElementById('save-learning').addEventListener('click', function() {
                const topic = document.getElementById('learning-topic').value.trim();
                const notes = document.getElementById('learning-notes').value.trim();
                
                if (topic) {
                    appData.learningSessions.push({
                        date: new Date().toISOString(),
                        topic: topic,
                        notes: notes
                    });
                    saveData();
                    updateLearningSessions();
                    document.getElementById('learning-topic').value = '';
                    document.getElementById('learning-notes').value = '';
                }
            });
            
            // IKIGAI
            document.getElementById('save-ikigai').addEventListener('click', function() {
                appData.ikigai = {
                    love: document.getElementById('love-text').value,
                    goodAt: document.getElementById('good-at-text').value,
                    needs: document.getElementById('needs-text').value,
                    paid: document.getElementById('paid-text').value
                };
                saveData();
                alert('IKIGAI saved successfully!');
            });
            
            document.getElementById('analyze-ikigai').addEventListener('click', function() {
                const resultSection = document.getElementById('ikigai-result');
                const suggestionText = document.getElementById('ikigai-suggestion');
                
                // Simple analysis - in a real app this would be more sophisticated
                const love = document.getElementById('love-text').value.toLowerCase();
                const goodAt = document.getElementById('good-at-text').value.toLowerCase();
                const needs = document.getElementById('needs-text').value.toLowerCase();
                const paid = document.getElementById('paid-text').value.toLowerCase();
                
                let suggestions = [];
                
                if (love && goodAt && needs && paid) {
                    suggestions.push("You've identified key elements in all four IKIGAI quadrants.");
                    suggestions.push("Look for overlaps between what you love and what you're good at - this is your passion.");
                    suggestions.push("Consider how you can combine your skills with world needs to create value.");
                } else {
                    suggestions.push("Complete all four quadrants for a more comprehensive IKIGAI analysis.");
                }
                
                if (love && goodAt) {
                    suggestions.push("Your passion lies at the intersection of what you love and what you're good at.");
                }
                
                if (needs && paid) {
                    suggestions.push("Your potential vocation lies at the intersection of what the world needs and what you can be paid for.");
                }
                
                suggestionText.innerHTML = suggestions.join('<br><br>');
                resultSection.style.display = 'block';
            });
            
            // Check for reminders periodically
            setInterval(checkReminders, 60000); // Check every minute
            
            // Initialize UI
            updateUI();
        });
    </script>
</body>
</html>
